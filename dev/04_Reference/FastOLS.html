<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>fastols ‚Äì CaML - Causal ML</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../assets/logo_no_text.svg" rel="icon" type="image/svg+xml">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-9ed85366717b0d4a9233a89d8452de7f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="text/javascript">
    // Enhanced Version Switcher for Quarto Documentation
    // Provides a floating version selector with hover functionality

    (function () {
        "use strict";

        // Configuration
        const CONFIG = {
            containerId: "version-switcher",
            position: { bottom: "20px", right: "20px" },
            versionsJsonPath: getVersionsJsonPath(),
            currentVersionText: getCurrentVersionFromPath(),
        };

        // Utility function to get the correct path to versions.json
        function getVersionsJsonPath() {
            const path = window.location.pathname;
            const segments = path.split("/").filter(Boolean);

            return "/versions.json";
        }

        // Detect current version from URL path
        function getCurrentVersionFromPath() {
            const path = window.location.pathname;
            const versionMatch = path.match(/\/v[\d\.\-\w]+\//);

            if (versionMatch) {
                return versionMatch[0].replace(/\//g, "");
            }
            if (path.includes("dev")) {
                return "dev";
            }

            return "latest";
        }

        // Create version switcher HTML structure
        function createVersionSwitcher(versions) {
            const container = document.createElement("div");
            container.id = CONFIG.containerId;
            container.setAttribute("role", "navigation");
            container.setAttribute("aria-label", "Version selector");

            // Create toggle button
            const toggleButton = document.createElement("button");
            toggleButton.className = "version-toggle-btn";
            toggleButton.setAttribute("aria-haspopup", "true");
            toggleButton.setAttribute("aria-expanded", "false");
            toggleButton.setAttribute(
                "aria-label",
                "Select documentation version",
            );

            const currentVersionLabel = versions.find(
                (v) =>
                    v.text === CONFIG.currentVersionText ||
                    (v.text === "latest" &&
                        CONFIG.currentVersionText === "latest"),
            );

            toggleButton.innerHTML = `
            <span class="version-icon">üìö</span>
            <span class="version-text">${currentVersionLabel ? currentVersionLabel.text : "Version"}</span>
            <span class="version-arrow">‚ñº</span>
        `;

            // Create dropdown menu
            const dropdown = document.createElement("div");
            dropdown.className = "version-dropdown";
            dropdown.setAttribute("role", "menu");
            dropdown.style.display = "none";

            // Create version list
            const versionList = document.createElement("ul");
            versionList.className = "version-list";
            versionList.setAttribute("role", "none");

            versions.forEach((version, index) => {
                const listItem = document.createElement("li");
                listItem.setAttribute("role", "none");

                const link = document.createElement("a");
                link.className = "version-link";
                link.href = version.href;
                link.textContent = version.text;
                link.setAttribute("role", "menuitem");
                link.setAttribute("tabindex", "-1");

                // Mark current version
                if (
                    version.text === CONFIG.currentVersionText ||
                    (version.text === "latest" &&
                        CONFIG.currentVersionText === "latest")
                ) {
                    link.classList.add("current-version");
                    link.setAttribute("aria-current", "page");
                }

                listItem.appendChild(link);
                versionList.appendChild(listItem);
            });

            dropdown.appendChild(versionList);
            container.appendChild(toggleButton);
            container.appendChild(dropdown);

            return { container, toggleButton, dropdown, versionList };
        }

        // Add event listeners for interaction
        function addEventListeners(elements) {
            const { container, toggleButton, dropdown, versionList } = elements;
            let isOpen = false;
            let hoverTimeout;

            // Mouse enter - show dropdown
            container.addEventListener("mouseenter", () => {
                clearTimeout(hoverTimeout);
                showDropdown();
            });

            // Mouse leave - hide dropdown with delay
            container.addEventListener("mouseleave", () => {
                hoverTimeout = setTimeout(() => {
                    hideDropdown();
                }, 300);
            });

            // Click handler for toggle button
            toggleButton.addEventListener("click", (e) => {
                e.preventDefault();
                if (isOpen) {
                    hideDropdown();
                } else {
                    showDropdown();
                }
            });

            // Keyboard navigation
            container.addEventListener("keydown", (e) => {
                const links = versionList.querySelectorAll(".version-link");
                const currentFocus = document.activeElement;
                const currentIndex = Array.from(links).indexOf(currentFocus);

                switch (e.key) {
                    case "Escape":
                        hideDropdown();
                        toggleButton.focus();
                        break;
                    case "ArrowDown":
                        e.preventDefault();
                        if (!isOpen) {
                            showDropdown();
                            links[0]?.focus();
                        } else {
                            const nextIndex =
                                currentIndex < links.length - 1
                                    ? currentIndex + 1
                                    : 0;
                            links[nextIndex]?.focus();
                        }
                        break;
                    case "ArrowUp":
                        e.preventDefault();
                        if (isOpen) {
                            const prevIndex =
                                currentIndex > 0
                                    ? currentIndex - 1
                                    : links.length - 1;
                            links[prevIndex]?.focus();
                        }
                        break;
                    case "Enter":
                    case " ":
                        if (currentFocus === toggleButton) {
                            e.preventDefault();
                            if (isOpen) {
                                hideDropdown();
                            } else {
                                showDropdown();
                                links[0]?.focus();
                            }
                        }
                        break;
                }
            });

            // Click outside to close
            document.addEventListener("click", (e) => {
                if (!container.contains(e.target)) {
                    hideDropdown();
                }
            });

            function showDropdown() {
                dropdown.style.display = "block";
                toggleButton.setAttribute("aria-expanded", "true");
                toggleButton.classList.add("active");
                isOpen = true;

                // Animate in
                requestAnimationFrame(() => {
                    dropdown.style.opacity = "1";
                    dropdown.style.transform = "translateY(0)";
                });
            }

            function hideDropdown() {
                dropdown.style.opacity = "0";
                dropdown.style.transform = "translateY(-10px)";
                toggleButton.setAttribute("aria-expanded", "false");
                toggleButton.classList.remove("active");
                isOpen = false;

                setTimeout(() => {
                    dropdown.style.display = "none";
                }, 200);
            }
        }

        // Apply CSS styles
        function injectStyles() {
            const styleId = "version-switcher-styles";
            if (document.getElementById(styleId)) return;

            const styles = `
            #version-switcher {
                position: fixed;
                bottom: ${CONFIG.position.bottom};
                right: ${CONFIG.position.right};
                z-index: 9999;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                font-size: 14px;
            }

            .version-toggle-btn {
                display: flex;
                align-items: center;
                gap: 8px;
                background: rgba(255, 255, 255, 0.95);
                border: 1px solid rgba(0, 0, 0, 0.1);
                border-radius: 8px;
                padding: 10px 16px;
                cursor: pointer;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                backdrop-filter: blur(10px);
                transition: all 0.2s ease;
                color: #333;
                font-weight: 500;
                min-width: 120px;
            }

            .version-toggle-btn:hover {
                background: rgba(255, 255, 255, 1);
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
                transform: translateY(-2px);
                border-color: rgba(0, 109, 9, 0.3);
            }

            .version-toggle-btn.active {
                background: rgba(255, 255, 255, 1);
                border-color: #006d09;
            }

            .version-icon {
                font-size: 16px;
            }

            .version-text {
                flex: 1;
                text-align: left;
            }

            .version-arrow {
                transition: transform 0.2s ease;
                font-size: 12px;
                color: #666;
            }

            .version-toggle-btn.active .version-arrow {
                transform: rotate(180deg);
            }

            .version-dropdown {
                position: absolute;
                bottom: 100%;
                right: 0;
                margin-bottom: 8px;
                background: rgba(255, 255, 255, 0.98);
                border: 1px solid rgba(0, 0, 0, 0.1);
                border-radius: 8px;
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
                backdrop-filter: blur(10px);
                opacity: 0;
                transform: translateY(-10px);
                transition: all 0.2s ease;
                min-width: 160px;
            }

            .version-list {
                list-style: none;
                margin: 0;
                padding: 8px 0;
            }

            .version-link {
                display: block;
                padding: 10px 16px;
                color: #333;
                text-decoration: none;
                transition: all 0.15s ease;
                position: relative;
            }

            .version-link:hover,
            .version-link:focus {
                background: rgba(0, 109, 9, 0.1);
                color: #006d09;
                outline: none;
            }

            .version-link.current-version {
                background: rgba(0, 109, 9, 0.1);
                color: #006d09;
                font-weight: 600;
            }

            .version-link.current-version::after {
                content: '‚úì';
                position: absolute;
                right: 16px;
                top: 50%;
                transform: translateY(-50%);
                font-size: 12px;
            }

            /* Dark mode support */
            @media (prefers-color-scheme: dark) {
                .version-toggle-btn {
                    background: rgba(40, 40, 40, 0.95);
                    border-color: rgba(255, 255, 255, 0.2);
                    color: #e0e0e0;
                }

                .version-toggle-btn:hover {
                    background: rgba(50, 50, 50, 1);
                    border-color: rgba(0, 180, 15, 0.5);
                }

                .version-dropdown {
                    background: rgba(40, 40, 40, 0.98);
                    border-color: rgba(255, 255, 255, 0.2);
                }

                .version-link {
                    color: #e0e0e0;
                }

                .version-link:hover,
                .version-link:focus {
                    background: rgba(0, 180, 15, 0.2);
                    color: #00b80f;
                }

                .version-link.current-version {
                    background: rgba(0, 180, 15, 0.2);
                    color: #00b80f;
                }
            }

            /* Mobile responsive */
            @media (max-width: 768px) {
                #version-switcher {
                    bottom: 15px;
                    right: 15px;
                }

                .version-toggle-btn {
                    padding: 8px 12px;
                    min-width: 100px;
                    font-size: 13px;
                }

                .version-dropdown {
                    min-width: 140px;
                }

                .version-link {
                    padding: 8px 12px;
                    font-size: 13px;
                }
            }
        `;

            const styleElement = document.createElement("style");
            styleElement.id = styleId;
            styleElement.textContent = styles;
            document.head.appendChild(styleElement);
        }

        // Initialize the version switcher
        function init() {
            // Don't initialize if already exists
            if (document.getElementById(CONFIG.containerId)) return;

            fetch(CONFIG.versionsJsonPath)
                .then((response) => {
                    if (!response.ok) {
                        throw new Error(
                            `HTTP error! status: ${response.status}`,
                        );
                    }
                    return response.json();
                })
                .then((versions) => {
                    if (!Array.isArray(versions) || versions.length === 0) {
                        console.warn("No versions found in versions.json");
                        return;
                    }

                    injectStyles();
                    const elements = createVersionSwitcher(versions);
                    addEventListeners(elements);
                    document.body.appendChild(elements.container);
                })
                .catch((error) => {
                    console.warn("Failed to load version switcher:", error);
                });
        }

        // Initialize when DOM is ready
        if (document.readyState === "loading") {
            document.addEventListener("DOMContentLoaded", init);
        } else {
            init();
        }
    })();
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles/styles.css">
<meta property="og:title" content="CaML - Causal ML">
<meta property="og:description" content="">
<meta property="og:site_name" content="CaML - Causal ML">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../assets/logo_no_text.svg" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-home" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Home</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-home">    
        <li>
    <a class="dropdown-item" href="../index.html">
 <span class="dropdown-text">Welcome!</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../01_Home/installation.html">
 <span class="dropdown-text">Installation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../01_Home/quickstart.html">
 <span class="dropdown-text">Tutorial: Quick Start</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-concepts" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Concepts</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-concepts">    
        <li>
    <a class="dropdown-item" href="../02_Concepts/motivation.html">
 <span class="dropdown-text">Motivation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../02_Concepts/theory.html">
 <span class="dropdown-text">Econometric Theory</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../02_Concepts/models.html">
 <span class="dropdown-text">Model Specifications</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-examples" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Examples</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-examples">    
        <li>
    <a class="dropdown-item" href="../03_Examples/AutoCATE.html">
 <span class="dropdown-text">AutoCATE</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../03_Examples/FastOLS.html">
 <span class="dropdown-text">FastOLS</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../03_Examples/SyntheticDataGenerator.html">
 <span class="dropdown-text">Caml Synthetic Data Generator</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-reference" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Reference</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-reference">    
        <li>
    <a class="dropdown-item" href="../04_Reference/index.html">
 <span class="dropdown-text">API Reference</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../04_Reference/support_matrix.html">
 <span class="dropdown-text">Outcome/Treatment Type Support Matrix</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-contributors" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Contributors</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-contributors">    
        <li>
    <a class="dropdown-item" href="../05_Contributors/getting_started.html">
 <span class="dropdown-text">Contributing to CaML</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../05_Contributors/environment.html">
 <span class="dropdown-text">Environment Setup</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../05_Contributors/documentation.html">
 <span class="dropdown-text">Documentation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../05_Contributors/testing.html">
 <span class="dropdown-text">Testing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../05_Contributors/conventional_commits.html">
 <span class="dropdown-text">Conventional Commits</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/jakepenzak/caml">
            Source code
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/jakepenzak/caml/issues/new">
            Report Issue
            </a>
          </li>
      </ul>
    </div>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#parameters" id="toc-parameters" class="nav-link active" data-scroll-target="#parameters">Parameters</a></li>
  <li><a href="#attributes" id="toc-attributes" class="nav-link" data-scroll-target="#attributes">Attributes</a></li>
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples">Examples</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a>
  <ul class="collapse">
  <li><a href="#caml.FastOLS.fit" id="toc-caml.FastOLS.fit" class="nav-link" data-scroll-target="#caml.FastOLS.fit">fit</a></li>
  <li><a href="#caml.FastOLS.estimate_ate" id="toc-caml.FastOLS.estimate_ate" class="nav-link" data-scroll-target="#caml.FastOLS.estimate_ate">estimate_ate</a></li>
  <li><a href="#caml.FastOLS.estimate_cate" id="toc-caml.FastOLS.estimate_cate" class="nav-link" data-scroll-target="#caml.FastOLS.estimate_cate">estimate_cate</a></li>
  <li><a href="#caml.FastOLS.predict" id="toc-caml.FastOLS.predict" class="nav-link" data-scroll-target="#caml.FastOLS.predict">predict</a></li>
  <li><a href="#caml.FastOLS.prettify_treatment_effects" id="toc-caml.FastOLS.prettify_treatment_effects" class="nav-link" data-scroll-target="#caml.FastOLS.prettify_treatment_effects">prettify_treatment_effects</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/jakepenzak/caml/edit/main/docs/04_Reference/FastOLS.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/jakepenzak/caml/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">FastOLS</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>FastOLS(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    Y,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    T,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    G<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    X<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    W<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    xformula<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    discrete_treatment<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    engine<span class="op">=</span><span class="st">'cpu'</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>FastOLS is an optimized implementation of the OLS estimator designed specifically with treatment effect estimation in mind.</p>
<p><strong>FastOLS is experimental and may change significantly in future versions.</strong></p>
<p>This class estimates a standard linear regression model for any number of continuous or binary outcomes and a single continuous or binary treatment, and provides estimates for the Average Treatment Effects (ATEs) and Group Average Treatment Effects (GATEs) out of the box. Additionally, methods are provided for estimating custom GATEs &amp; Conditional Average Treatment Effects (CATEs) of individual observations, which can also be used for out-of-sample predictions. Note, this method assumes linear treatment effects and heterogeneity, which is typically sufficient when primarily concerned with ATEs and GATEs.</p>
<p>This class leverages JAX for fast numerical computations, which can be installed using <code>pip install caml[jax]</code>, defaulting to NumPy if JAX is not available. For GPU acceleration, install JAX with GPU support using <code>pip install caml[jax-gpu]</code>.</p>
<p>For outcome/treatment support, see <a href="../04_Reference/support_matrix.html">Support Matrix</a>.</p>
<p>For model specification details, see <a href="../02_Concepts/models.html#fastols">Model Specifications</a>.</p>
<p>For a more detailed working example, see <a href="../03_Examples/FastOLS.html">FastOLS Example</a>.</p>
<section id="parameters" class="level2 doc-section doc-section-parameters">
<h2 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters">Parameters</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 73%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Y</td>
<td>Sequence[str]</td>
<td>A list of outcome variable names.</td>
<td><em>required</em></td>
</tr>
<tr class="even">
<td>T</td>
<td>str</td>
<td>The treatment variable name.</td>
<td><em>required</em></td>
</tr>
<tr class="odd">
<td>G</td>
<td>Sequence[str] | None</td>
<td>A list of group variable names. These will be the groups for which GATEs will be estimated.</td>
<td><code>None</code></td>
</tr>
<tr class="even">
<td>X</td>
<td>Sequence[str] | None</td>
<td>A list of covariate variable names. These will be the covariates for which heterogeneity/CATEs can be estimated.</td>
<td><code>None</code></td>
</tr>
<tr class="odd">
<td>W</td>
<td>Sequence[str] | None</td>
<td>A list of additional covariate variable names to be used as controls. These will be the additional covariates not used for modeling heterogeneity/CATEs.</td>
<td><code>None</code></td>
</tr>
<tr class="even">
<td>xformula</td>
<td>str | None</td>
<td>Additional formula string to append to the main formula, starting with ‚Äú+‚Äù. For example, ‚Äú+age+gender‚Äù will add age and gender as additional predictors.</td>
<td><code>None</code></td>
</tr>
<tr class="odd">
<td>discrete_treatment</td>
<td>bool</td>
<td>Whether the treatment is discrete</td>
<td><code>True</code></td>
</tr>
<tr class="even">
<td>engine</td>
<td>str</td>
<td>The engine to use for computation. Can be ‚Äúcpu‚Äù or ‚Äúgpu‚Äù. Note ‚Äúgpu‚Äù requires JAX to be installed, which can be installed via <code>pip install caml[jax-gpu]</code>.</td>
<td><code>'cpu'</code></td>
</tr>
</tbody>
</table>
</section>
<section id="attributes" class="level2 doc-section doc-section-attributes">
<h2 class="doc-section doc-section-attributes anchored" data-anchor-id="attributes">Attributes</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 9%">
<col style="width: 12%">
<col style="width: 77%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Y</td>
<td>Sequence[str]</td>
<td>A list of outcome variable names.</td>
</tr>
<tr class="even">
<td>T</td>
<td>str</td>
<td>The treatment variable name.</td>
</tr>
<tr class="odd">
<td>G</td>
<td>Sequence[str] | None</td>
<td>The list of group variable names. These will be the groups for which GATEs will be estimated.</td>
</tr>
<tr class="even">
<td>X</td>
<td>Sequence[str] | None</td>
<td>The list of variable names representing the confounder/control feature set to be utilized for estimating heterogeneity/CATEs, that are in addition to G.</td>
</tr>
<tr class="odd">
<td>W</td>
<td>Sequence[str] | None</td>
<td>The list of variable names representing the confounder/control feature <strong>not</strong> utilized for estimating heterogeneity/CATEs.</td>
</tr>
<tr class="even">
<td>formula</td>
<td>str</td>
<td>The formula leveraged for design matrix creation via Patsy.</td>
</tr>
<tr class="odd">
<td>params</td>
<td>np.ndarray</td>
<td>The estimated parameters of the model.</td>
</tr>
<tr class="even">
<td>vcv</td>
<td>np.ndarray</td>
<td>The estimated variance-covariance matrix of the model parameters.</td>
</tr>
<tr class="odd">
<td>std_err</td>
<td>np.ndarray</td>
<td>The standard errors of the estimated parameters.</td>
</tr>
<tr class="even">
<td>fitted_values</td>
<td>np.ndarray</td>
<td>The predicted values from the model.</td>
</tr>
<tr class="odd">
<td>residuals</td>
<td>np.ndarray</td>
<td>The residuals of the model.</td>
</tr>
<tr class="even">
<td>treatment_effects</td>
<td>dict</td>
<td>The estimated treatment effects dictionary.</td>
</tr>
</tbody>
</table>
</section>
<section id="examples" class="level2 doc-section doc-section-examples">
<h2 class="doc-section doc-section-examples anchored" data-anchor-id="examples">Examples</h2>
<div id="f05a2c2e" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> caml <span class="im">import</span> FastOLS</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> caml.extensions.synthetic_data <span class="im">import</span> SyntheticDataGenerator</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>data_generator <span class="op">=</span> SyntheticDataGenerator(n_cont_outcomes<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                                            n_binary_outcomes<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                                            n_cont_modifiers<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>                                            n_binary_modifiers<span class="op">=</span><span class="dv">2</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>                                            seed<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> data_generator.df</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>fo_obj <span class="op">=</span> FastOLS(</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    Y<span class="op">=</span>[c <span class="cf">for</span> c <span class="kw">in</span> df.columns <span class="cf">if</span> <span class="st">"Y"</span> <span class="kw">in</span> c],</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    T<span class="op">=</span><span class="st">"T1_binary"</span>,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    G<span class="op">=</span>[c <span class="cf">for</span> c <span class="kw">in</span> df.columns <span class="cf">if</span> <span class="st">"X"</span> <span class="kw">in</span> c <span class="kw">and</span> (<span class="st">"bin"</span> <span class="kw">in</span> c <span class="kw">or</span> <span class="st">"dis"</span> <span class="kw">in</span> c)],</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    X<span class="op">=</span>[c <span class="cf">for</span> c <span class="kw">in</span> df.columns <span class="cf">if</span> <span class="st">"X"</span> <span class="kw">in</span> c <span class="kw">and</span> <span class="st">"cont"</span> <span class="kw">in</span> c],</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    W<span class="op">=</span>[c <span class="cf">for</span> c <span class="kw">in</span> df.columns <span class="cf">if</span> <span class="st">"W"</span> <span class="kw">in</span> c],</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    xformula<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    engine<span class="op">=</span><span class="st">"cpu"</span>,</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    discrete_treatment<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fo_obj)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>================== FastOLS Object ==================
Engine: cpu
Outcome Variable: ['Y1_continuous', 'Y2_binary']
Treatment Variable: T1_binary
Discrete Treatment: True
Group Variables: ['X2_binary', 'X3_binary']
Features/Confounders for Heterogeneity (X): ['X1_continuous']
Features/Confounders as Controls (W): []
Formula: Q('Y1_continuous') + Q('Y2_binary') ~ C(Q('T1_binary')) + C(Q('X2_binary'))*C(Q('T1_binary')) + C(Q('X3_binary'))*C(Q('T1_binary')) + Q('X1_continuous')*C(Q('T1_binary'))
</code></pre>
</div>
</div>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="#caml.FastOLS.fit">fit</a></td>
<td>Fits the regression model on the provided data and, optionally, estimates Average Treatment Effect(s) (ATE) and Group Average Treatment Effect(s) (GATE).</td>
</tr>
<tr class="even">
<td><a href="#caml.FastOLS.estimate_ate">estimate_ate</a></td>
<td>Estimate Average Treatment Effects (ATEs) of <code>T</code> on each <code>Y</code> from fitted model.</td>
</tr>
<tr class="odd">
<td><a href="#caml.FastOLS.estimate_cate">estimate_cate</a></td>
<td>Estimate Conditional Average Treatment Effects (CATEs) of <code>T</code> on each <code>Y</code> from fitted model for all given observations in the dataset.</td>
</tr>
<tr class="even">
<td><a href="#caml.FastOLS.predict">predict</a></td>
<td>Generate predicted conditional average treatment effects (CATEs) or outcomes.</td>
</tr>
<tr class="odd">
<td><a href="#caml.FastOLS.prettify_treatment_effects">prettify_treatment_effects</a></td>
<td>Convert treatment effects dictionary to a pandas DataFrame.</td>
</tr>
</tbody>
</table>
<section id="caml.FastOLS.fit" class="level3">
<h3 class="anchored" data-anchor-id="caml.FastOLS.fit">fit</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>FastOLS.fit(df, <span class="op">*</span>, n_jobs<span class="op">=-</span><span class="dv">1</span>, estimate_effects<span class="op">=</span><span class="va">True</span>, cov_type<span class="op">=</span><span class="st">'nonrobust'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Fits the regression model on the provided data and, optionally, estimates Average Treatment Effect(s) (ATE) and Group Average Treatment Effect(s) (GATE).</p>
<p>If <code>estimate_effects</code> is True, the method estimates Average Treatment Effects (ATEs) and Group Average Treatment Effects (GATEs), based on specified <code>G</code>. This leverages <code>estimate_ate</code> method under the hood, but efficiently reuses the data and parallelizes the computation of GATEs.</p>
<section id="parameters-1" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-1">Parameters</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 7%">
<col style="width: 11%">
<col style="width: 75%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>df</td>
<td>PandasConvertibleDataFrame</td>
<td>Input dataframe to fit the model on. Supported formats: pandas DataFrame, PySpark DataFrame, Polars DataFrame, or Any object with <code>toPandas()</code> or <code>to_pandas()</code> method</td>
<td><em>required</em></td>
</tr>
<tr class="even">
<td>n_jobs</td>
<td>int</td>
<td>The number of jobs to use for parallel processing in the estimation of GATEs. Defaults to -1, which uses all available processors. If getting OOM errors, try setting n_jobs to a lower value.</td>
<td><code>-1</code></td>
</tr>
<tr class="odd">
<td>estimate_effects</td>
<td>bool</td>
<td>Whether to estimate Average Treatment Effects (ATEs) and Group Average Treatment Effects (GATEs).</td>
<td><code>True</code></td>
</tr>
<tr class="even">
<td>cov_type</td>
<td>str</td>
<td>The covariance estimator to use for variance-covariance matrix and standard errors. Can be ‚Äúnonrobust‚Äù, ‚ÄúHC0‚Äù, or ‚ÄúHC1‚Äù.</td>
<td><code>'nonrobust'</code></td>
</tr>
</tbody>
</table>
</section>
<section id="examples-1" class="level4 doc-section doc-section-examples">
<h4 class="doc-section doc-section-examples anchored" data-anchor-id="examples-1">Examples</h4>
<div id="30ad410f" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>fo_obj.fit(df, n_jobs<span class="op">=</span><span class="dv">4</span>, estimate_effects<span class="op">=</span><span class="va">True</span>, cov_type<span class="op">=</span><span class="st">'nonrobust'</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>fo_obj.treatment_effects.keys()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>dict_keys(['overall', 'X2_binary-0', 'X2_binary-1', 'X3_binary-1', 'X3_binary-0'])</code></pre>
</div>
</div>
</section>
</section>
<section id="caml.FastOLS.estimate_ate" class="level3">
<h3 class="anchored" data-anchor-id="caml.FastOLS.estimate_ate">estimate_ate</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>FastOLS.estimate_ate(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    df,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    return_results_dict<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    group<span class="op">=</span><span class="st">'Custom Group'</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    membership<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    _diff_matrix<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Estimate Average Treatment Effects (ATEs) of <code>T</code> on each <code>Y</code> from fitted model.</p>
<p>If the entire dataframe is provided, the function will estimate the ATE of the entire population, where the ATE, in the case of binary treatments, is formally defined as: <span class="math display">\[
    \tau = \mathbb{E}_n[\mathbf{Y}_1 - \mathbf{Y}_0]
    \]</span></p>
<p>If a subset of the dataframe is provided, the function will estimate the ATE of the subset (e.g., GATEs), where the GATE, in the case of binary treatments, is formally defined as: <span class="math display">\[
    \tau = \mathbb{E}_n[\mathbf{Y}_1 - \mathbf{Y}_0|\mathbf{G}=G]
    \]</span></p>
<p>For more details on treatment effect estimation, see <a href="../02_Concepts/models.html#treatment-effect-estimation-inference">Model Specifications</a>.</p>
<section id="parameters-2" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-2">Parameters</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 8%">
<col style="width: 11%">
<col style="width: 73%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>df</td>
<td>PandasConvertibleDataFrame</td>
<td>Dataframe containing the data to estimate the ATEs. Supported formats: pandas DataFrame, PySpark DataFrame, Polars DataFrame, or Any object with <code>toPandas()</code> or <code>to_pandas()</code> method</td>
<td><em>required</em></td>
</tr>
<tr class="even">
<td>return_results_dict</td>
<td>bool</td>
<td>If True, the function returns a dictionary containing ATEs/GATEs, standard errors, t-statistics, and p-values. If False, the function returns a numpy array containing ATEs/GATEs alone.</td>
<td><code>False</code></td>
</tr>
<tr class="odd">
<td>group</td>
<td>str</td>
<td>Name of the group to estimate the ATEs for.</td>
<td><code>'Custom Group'</code></td>
</tr>
<tr class="even">
<td>membership</td>
<td>str | None</td>
<td>Name of the membership variable to estimate the ATEs for.</td>
<td><code>None</code></td>
</tr>
<tr class="odd">
<td>_diff_matrix</td>
<td>jnp.ndarray | None = None</td>
<td>Private argument used in <code>fit</code> method.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns">Returns</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 13%">
<col style="width: 81%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>jnp.ndarray | dict</td>
<td>Estimated ATEs/GATEs or dictionary containing the estimated ATEs/GATEs and their standard errors, t-statistics, and p-values.</td>
</tr>
</tbody>
</table>
</section>
<section id="examples-2" class="level4 doc-section doc-section-examples">
<h4 class="doc-section doc-section-examples anchored" data-anchor-id="examples-2">Examples</h4>
<div id="3ab77037" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>ate <span class="op">=</span> fo_obj.estimate_ate(df, return_results_dict<span class="op">=</span><span class="va">True</span>, group<span class="op">=</span><span class="st">"Overall"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>ate</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>{'Overall': {'outcome': ['Y1_continuous', 'Y2_binary'],
  'ate': array([[3.75944943, 0.19349086]]),
  'std_err': array([[0.02012718, 0.00971994]]),
  't_stat': array([[186.78472875,  19.90658227]]),
  'pval': array([[0., 0.]]),
  'n': 10000,
  'n_treated': 5060,
  'n_control': 4940}}</code></pre>
</div>
</div>
<div id="abcd0e7c" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>df_filtered <span class="op">=</span> df.query(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"X3_binary == 0 &amp; X1_continuous &lt; 5"</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>).copy()</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>custom_gate <span class="op">=</span> fo_obj.estimate_ate(df_filtered)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>custom_gate</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>array([[1.39607152, 0.08336419]])</code></pre>
</div>
</div>
</section>
</section>
<section id="caml.FastOLS.estimate_cate" class="level3">
<h3 class="anchored" data-anchor-id="caml.FastOLS.estimate_cate">estimate_cate</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>FastOLS.estimate_cate(df, <span class="op">*</span>, return_results_dict<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Estimate Conditional Average Treatment Effects (CATEs) of <code>T</code> on each <code>Y</code> from fitted model for all given observations in the dataset.</p>
<p>The CATE, in the case of binary treatments, is formally defined as: <span class="math display">\[
    \tau = \mathbb{E}_n[\mathbf{Y}_1 - \mathbf{Y}_0|\mathbf{Q}=Q]
    \]</span></p>
<p>For more details on treatment effect estimation, see <a href="../02_Concepts/models.html#treatment-effect-estimation-inference">Model Specifications</a>.</p>
<section id="parameters-3" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-3">Parameters</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 8%">
<col style="width: 11%">
<col style="width: 75%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>df</td>
<td>PandasConvertibleDataFrame</td>
<td>Dataframe containing the data to estimate CATEs for. Supported formats: pandas DataFrame, PySpark DataFrame, Polars DataFrame, or Any object with <code>toPandas()</code> or <code>to_pandas()</code> method</td>
<td><em>required</em></td>
</tr>
<tr class="even">
<td>return_results_dict</td>
<td>bool</td>
<td>If True, the function returns a dictionary containing CATEs, standard errors, t-statistics, and p-values. If False, the function returns a numpy array containing CATEs alone.</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-1" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-1">Returns</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 7%">
<col style="width: 18%">
<col style="width: 74%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>jnp.ndarray | dict</td>
<td>CATEs or dictionary containing CATEs, standard errors, t-statistics, and p-values.</td>
</tr>
</tbody>
</table>
</section>
<section id="examples-3" class="level4 doc-section doc-section-examples">
<h4 class="doc-section doc-section-examples anchored" data-anchor-id="examples-3">Examples</h4>
<div id="87e9946b" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>cates <span class="op">=</span> fo_obj.estimate_cate(df)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>cates[:<span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>array([[3.89639511, 0.17159235],
       [3.74635426, 0.23789582],
       [4.5283798 , 0.21765926],
       [3.87988946, 0.17201947],
       [3.66232416, 0.24007028]])</code></pre>
</div>
</div>
<div id="704bc7c6" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> fo_obj.estimate_cate(df, return_results_dict<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>res.keys()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>dict_keys(['outcome', 'cate', 'std_err', 't_stat', 'pval'])</code></pre>
</div>
</div>
</section>
</section>
<section id="caml.FastOLS.predict" class="level3">
<h3 class="anchored" data-anchor-id="caml.FastOLS.predict">predict</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>FastOLS.predict(df, <span class="op">*</span>, return_results_dict<span class="op">=</span><span class="va">False</span>, mode<span class="op">=</span><span class="st">'cate'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Generate predicted conditional average treatment effects (CATEs) or outcomes.</p>
<p>When mode is ‚Äúoutcome‚Äù, the function returns predicted outcomes.</p>
<p>When mode is ‚Äúcate‚Äù, the function returns predicted CATEs, behaving as an alias for <code>estimate_cate</code>.</p>
<section id="parameters-4" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-4">Parameters</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 78%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>df</td>
<td>PandasConvertibleDataFrame</td>
<td>Dataframe containing the data to estimate CATEs for. Supported formats: pandas DataFrame, PySpark DataFrame, Polars DataFrame, or Any object with <code>toPandas()</code> or <code>to_pandas()</code> method</td>
<td><em>required</em></td>
</tr>
<tr class="even">
<td>return_results_dict</td>
<td>bool</td>
<td>If True, the function returns a dictionary containing CATEs, standard errors, t-statistics, and p-values. If False, the function returns a numpy array containing CATEs alone. Does not have any effect when mode is ‚Äúoutcome‚Äù.</td>
<td><code>False</code></td>
</tr>
<tr class="odd">
<td>mode</td>
<td>str</td>
<td>The mode of prediction. Supported modes are ‚Äúcate‚Äù and ‚Äúoutcome‚Äù. If ‚Äúcate‚Äù, the function returns CATEs. If ‚Äúoutcome‚Äù, the function returns predicted outcomes.</td>
<td><code>'cate'</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-2" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-2">Returns</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 7%">
<col style="width: 18%">
<col style="width: 74%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>jnp.ndarray | dict</td>
<td>CATEs or dictionary containing CATEs, standard errors, t-statistics, and p-values.</td>
</tr>
</tbody>
</table>
</section>
<section id="examples-4" class="level4 doc-section doc-section-examples">
<h4 class="doc-section doc-section-examples anchored" data-anchor-id="examples-4">Examples</h4>
<div id="024a8704" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>cates <span class="op">=</span> fo_obj.predict(df)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>cates[:<span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>array([[3.89639511, 0.17159235],
       [3.74635426, 0.23789582],
       [4.5283798 , 0.21765926],
       [3.87988946, 0.17201947],
       [3.66232416, 0.24007028]])</code></pre>
</div>
</div>
<div id="a3448da1" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> fo_obj.predict(df, return_results_dict<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>res.keys()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>dict_keys(['outcome', 'cate', 'std_err', 't_stat', 'pval'])</code></pre>
</div>
</div>
</section>
</section>
<section id="caml.FastOLS.prettify_treatment_effects" class="level3">
<h3 class="anchored" data-anchor-id="caml.FastOLS.prettify_treatment_effects">prettify_treatment_effects</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>FastOLS.prettify_treatment_effects(effects<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Convert treatment effects dictionary to a pandas DataFrame.</p>
<p>If no argument is provided, the results are constructed from internal results dictionary. This is useful default behavior. For custom treatment effects, you can pass the results generated by the <code>estimate_ate</code> method.</p>
<section id="parameters-5" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-5">Parameters</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 78%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>effects</td>
<td>dict</td>
<td>Dictionary of treatment effects. If None, the results are constructed from internal results dictionary.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-3" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-3">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>pd.DataFrame</td>
<td>DataFrame of treatment effects.</td>
</tr>
</tbody>
</table>
</section>
<section id="examples-5" class="level4 doc-section doc-section-examples">
<h4 class="doc-section doc-section-examples anchored" data-anchor-id="examples-5">Examples</h4>
<div id="76fd780a" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>fo_obj.prettify_treatment_effects()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">group</th>
<th data-quarto-table-cell-role="th">membership</th>
<th data-quarto-table-cell-role="th">outcome</th>
<th data-quarto-table-cell-role="th">ate</th>
<th data-quarto-table-cell-role="th">std_err</th>
<th data-quarto-table-cell-role="th">t_stat</th>
<th data-quarto-table-cell-role="th">pval</th>
<th data-quarto-table-cell-role="th">n</th>
<th data-quarto-table-cell-role="th">n_treated</th>
<th data-quarto-table-cell-role="th">n_control</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>overall</td>
<td>None</td>
<td>Y1_continuous</td>
<td>3.759449</td>
<td>0.020127</td>
<td>186.784729</td>
<td>0.000000</td>
<td>10000</td>
<td>5060</td>
<td>4940</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>overall</td>
<td>None</td>
<td>Y2_binary</td>
<td>0.193491</td>
<td>0.009720</td>
<td>19.906582</td>
<td>0.000000</td>
<td>10000</td>
<td>5060</td>
<td>4940</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>X2_binary</td>
<td>0</td>
<td>Y1_continuous</td>
<td>3.584580</td>
<td>0.034935</td>
<td>102.606668</td>
<td>0.000000</td>
<td>3320</td>
<td>1691</td>
<td>1629</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>X2_binary</td>
<td>0</td>
<td>Y2_binary</td>
<td>0.156381</td>
<td>0.016871</td>
<td>9.269187</td>
<td>0.000000</td>
<td>3320</td>
<td>1691</td>
<td>1629</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>X2_binary</td>
<td>1</td>
<td>Y1_continuous</td>
<td>3.846360</td>
<td>0.024626</td>
<td>156.193627</td>
<td>0.000000</td>
<td>6680</td>
<td>3369</td>
<td>3311</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>X2_binary</td>
<td>1</td>
<td>Y2_binary</td>
<td>0.211934</td>
<td>0.011892</td>
<td>17.821080</td>
<td>0.000000</td>
<td>6680</td>
<td>3369</td>
<td>3311</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>X3_binary</td>
<td>1</td>
<td>Y1_continuous</td>
<td>4.081423</td>
<td>0.021454</td>
<td>190.238254</td>
<td>0.000000</td>
<td>8801</td>
<td>4451</td>
<td>4350</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>X3_binary</td>
<td>1</td>
<td>Y2_binary</td>
<td>0.208494</td>
<td>0.010361</td>
<td>20.123279</td>
<td>0.000000</td>
<td>8801</td>
<td>4451</td>
<td>4350</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>X3_binary</td>
<td>0</td>
<td>Y1_continuous</td>
<td>1.396072</td>
<td>0.058130</td>
<td>24.016441</td>
<td>0.000000</td>
<td>1199</td>
<td>609</td>
<td>590</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>X3_binary</td>
<td>0</td>
<td>Y2_binary</td>
<td>0.083364</td>
<td>0.028072</td>
<td>2.969612</td>
<td>0.002982</td>
<td>1199</td>
<td>609</td>
<td>590</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="06c154d3" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Using a custom GATE</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>custom_gate <span class="op">=</span> fo_obj.estimate_ate(df_filtered, return_results_dict<span class="op">=</span><span class="va">True</span>, group<span class="op">=</span><span class="st">"My Custom Group"</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>fo_obj.prettify_treatment_effects(custom_gate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">group</th>
<th data-quarto-table-cell-role="th">membership</th>
<th data-quarto-table-cell-role="th">outcome</th>
<th data-quarto-table-cell-role="th">ate</th>
<th data-quarto-table-cell-role="th">std_err</th>
<th data-quarto-table-cell-role="th">t_stat</th>
<th data-quarto-table-cell-role="th">pval</th>
<th data-quarto-table-cell-role="th">n</th>
<th data-quarto-table-cell-role="th">n_treated</th>
<th data-quarto-table-cell-role="th">n_control</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>My Custom Group</td>
<td>None</td>
<td>Y1_continuous</td>
<td>1.396072</td>
<td>0.058130</td>
<td>24.016441</td>
<td>0.000000</td>
<td>1199</td>
<td>609</td>
<td>590</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>My Custom Group</td>
<td>None</td>
<td>Y2_binary</td>
<td>0.083364</td>
<td>0.028072</td>
<td>2.969612</td>
<td>0.002982</td>
<td>1199</td>
<td>609</td>
<td>590</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>


</section>
</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>¬© Copyright 2024, Jacob Pieniazek</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/jakepenzak/caml/edit/main/docs/04_Reference/FastOLS.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/jakepenzak/caml/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>Powered by: <a href="https://quarto.org/"><img src="../assets/external_logos/quarto.png" class="img-fluid" width="85"></a></p>
</div>
  </div>
</footer>




</body></html>